Dealing with malloc and free
